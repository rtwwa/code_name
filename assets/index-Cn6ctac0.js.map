{"version":3,"file":"index-Cn6ctac0.js","sources":["../../src/utils/fullscreen.js","../../src/config.js","../../src/app.js","../../src/objects/rope.js","../../src/objects/player/abilities/hook.js","../../src/objects/player/particles.js","../../src/objects/player/player.js","../../src/scenes/testing_scene.js","../../src/main.js"],"sourcesContent":["function resizeGame(kaplay) {\r\n  const gameCanvas = document.querySelector(\"canvas\");\r\n\r\n  const winWidth = window.innerWidth;\r\n  const winHeight = window.innerHeight;\r\n\r\n  const scaleX = Math.floor(winWidth / kaplay.width);\r\n  const scaleY = Math.floor(winHeight / kaplay.height);\r\n  const scale = Math.max(1, Math.min(scaleX, scaleY));\r\n\r\n  gameCanvas.style.width = kaplay.width * scale + \"px\";\r\n  gameCanvas.style.height = kaplay.height * scale + \"px\";\r\n  gameCanvas.style.imageRendering = \"pixelated\";\r\n  gameCanvas.style.position = \"absolute\";\r\n  gameCanvas.style.top = \"50%\";\r\n  gameCanvas.style.left = \"50%\";\r\n  gameCanvas.style.transform = \"translate(-50%, -50%)\";\r\n}\r\n\r\nfunction goFullscreen() {\r\n  const canvas = document.querySelector(\"canvas\");\r\n  if (canvas.requestFullscreen) {\r\n    canvas.requestFullscreen();\r\n  } else if (canvas.webkitRequestFullscreen) {\r\n    canvas.webkitRequestFullscreen();\r\n  }\r\n}\r\n\r\nexport function fullscreenHandler(kaplay) {\r\n  window.addEventListener(\"resize\", resizeGame(kaplay));\r\n  window.addEventListener(\"load\", resizeGame(kaplay));\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"f\") {\r\n      goFullscreen();\r\n    }\r\n  });\r\n}\r\n","export const GAME_WIDTH = 800;\r\nexport const GAME_HEIGHT = 450;\r\n\r\n// 16:9\r\n\r\nexport const COLORS = {\r\n  background: [39, 38, 36],\r\n  foreground: [255, 255, 255],\r\n};\r\n","const App = {\r\n  kaplayInstance: null,\r\n  currentScene: null,\r\n\r\n  init(kaplayInstance) {\r\n    this.kaplayInstance = kaplayInstance;\r\n  },\r\n\r\n  addScene(name, sceneFunc) {\r\n    if (!this.kaplayInstance) {\r\n      console.error(\"Kaplay instance не инициализирован\");\r\n      return;\r\n    }\r\n\r\n    this.kaplayInstance.scene(name, sceneFunc);\r\n  },\r\n\r\n  startScene(name) {\r\n    if (!this.kaplayInstance) {\r\n      console.error(\"Kaplay instance не инициализирован\");\r\n      return;\r\n    }\r\n\r\n    this.currentScene = name;\r\n    this.kaplayInstance.go(name);\r\n  },\r\n};\r\n\r\nexport default App;\r\n","export function createSwingRope(anchor, radius) {\r\n  let angle = Math.PI / 2; // 90° вниз\r\n  let angularVelocity = 0;\r\n  const gravity = 0.5; // сила притяжения (можно тюнить)\r\n  const damping = 0.995; // трение\r\n\r\n  let player = null;\r\n\r\n  function attach(entity) {\r\n    player = entity;\r\n    const dx = player.pos.x - anchor.x;\r\n    const dy = player.pos.y - anchor.y;\r\n    angle = Math.atan2(dy, dx);\r\n    angularVelocity = 0;\r\n  }\r\n\r\n  function applyImpulse(force) {\r\n    angularVelocity += force;\r\n  }\r\n\r\n  function update(dt) {\r\n    if (!player) return;\r\n\r\n    const frameFactor = dt() * 60;\r\n\r\n    angularVelocity += gravity * Math.cos(angle) * frameFactor;\r\n    angularVelocity *= Math.pow(damping, frameFactor);\r\n    angle += angularVelocity * frameFactor;\r\n\r\n    const dx = player.pos.x - anchor.x;\r\n    const dy = player.pos.y - anchor.y;\r\n    const dist = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    if (dist !== radius) {\r\n      const nx = dx / dist;\r\n      const ny = dy / dist;\r\n\r\n      player.pos.x = anchor.x + nx * radius;\r\n      player.pos.y = anchor.y + ny * radius;\r\n\r\n      const radialVel = player.vel.x * nx + player.vel.y * ny;\r\n      player.vel.x -= radialVel * nx;\r\n      player.vel.y -= radialVel * ny;\r\n    }\r\n  }\r\n\r\n  function drawRope() {\r\n    if (!player) return;\r\n\r\n    drawLine({\r\n      p1: anchor,\r\n      p2: player.pos,\r\n      width: 2,\r\n      color: [0, 0, 0],\r\n    });\r\n\r\n    const dir = player.vel.unit().scale(40);\r\n    const endPos = player.pos.add(dir);\r\n\r\n    drawLine({\r\n      p1: player.pos,\r\n      p2: endPos,\r\n      width: 2,\r\n      color: BLUE,\r\n    });\r\n  }\r\n\r\n  function setAnchor(newAnchor) {\r\n    anchor = newAnchor;\r\n    if (player) {\r\n      const dx = player.pos.x - anchor.x;\r\n      const dy = player.pos.y - anchor.y;\r\n      angle = Math.atan2(dy, dx);\r\n      angularVelocity = 0;\r\n    }\r\n  }\r\n\r\n  function setRadius(newRadius) {\r\n    radius = newRadius;\r\n    if (player) {\r\n      const dx = player.pos.x - anchor.x;\r\n      const dy = player.pos.y - anchor.y;\r\n      angle = Math.atan2(dy, dx);\r\n\r\n      player.pos.x = anchor.x + Math.cos(angle) * radius;\r\n      player.pos.y = anchor.y + Math.sin(angle) * radius;\r\n\r\n      const nx = Math.cos(angle);\r\n      const ny = Math.sin(angle);\r\n      const radialVel = player.vel.x * nx + player.vel.y * ny;\r\n      player.vel.x -= radialVel * nx;\r\n      player.vel.y -= radialVel * ny;\r\n    }\r\n  }\r\n\r\n  return {\r\n    attach,\r\n    applyImpulse,\r\n    update,\r\n    setAnchor,\r\n    setRadius,\r\n    draw: drawRope,\r\n  };\r\n}\r\n","import { createSwingRope } from \"../../rope\";\r\n\r\nconst HOOK_IMPULSE = 400;\r\nconst HOOK_LEN = 120;\r\n\r\nexport function createHook(player) {\r\n  const rope = createSwingRope(vec2(0, 0), HOOK_LEN);\r\n  let updateRope = false;\r\n\r\n  rope.attach(player);\r\n\r\n  onKeyPress(\"z\", () => {\r\n    // if rope is not active, release new rope\r\n    if (updateRope == false) {\r\n      releaseHook(player, rope);\r\n      updateRope = true;\r\n      return;\r\n    }\r\n\r\n    // otherwise, remove the hook and set false updateRope flag\r\n    updateRope = false;\r\n    removeHook(player);\r\n  });\r\n\r\n  onUpdate(() => {\r\n    if (updateRope) {\r\n      rope.update(dt);\r\n    }\r\n  });\r\n\r\n  onDraw(() => {\r\n    if (updateRope) {\r\n      rope.draw();\r\n    }\r\n  });\r\n\r\n  return {\r\n    isHooked: updateRope,\r\n  };\r\n}\r\n\r\nconst releaseHook = (player, rope) => {\r\n  const hit = getNewHookPoint(player);\r\n  if (hit == null) {\r\n    return;\r\n  }\r\n\r\n  rope.setAnchor(hit);\r\n\r\n  const hook_len = hit.sub(player.pos).len();\r\n  if (hook_len < HOOK_LEN) {\r\n    rope.setRadius(hook_len);\r\n  } else {\r\n    rope.setRadius(HOOK_LEN);\r\n  }\r\n};\r\n\r\nconst removeHook = (player) => {\r\n  let newDir = Vec2.fromAngle(-45).scale(HOOK_IMPULSE);\r\n  newDir.x = newDir.x * player.lastDirection;\r\n  player.applyImpulse(newDir);\r\n};\r\n\r\nconst getNewHookPoint = (player) => {\r\n  let direction = Vec2.fromAngle(-45);\r\n  player.lastDirection > 0\r\n    ? (direction.x = direction.x)\r\n    : (direction.x = -direction.x);\r\n  let hit = raycast(player.pos, direction.scale(HOOK_LEN), [\"player\"]);\r\n\r\n  if (hit) {\r\n    return hit.point;\r\n  }\r\n\r\n  return null;\r\n};\r\n","export function createFootstepEmitter(player) {\r\n  const dustSprite = getSprite(\"dust\");\r\n  const dustTexture = dustSprite.data.tex;\r\n  const dustFrame = dustSprite.data.frames[0];\r\n\r\n  const emitter = add([\r\n    pos(),\r\n    particles(\r\n      {\r\n        max: 50,\r\n        lifeTime: [0.5, 5],\r\n        speed: [10, 5],\r\n        texture: dustTexture,\r\n        quads: [dustFrame],\r\n      },\r\n      {\r\n        direction: 90,\r\n        spread: 20,\r\n      }\r\n    ),\r\n  ]);\r\n\r\n  return emitter;\r\n}\r\n","import { createSwingRope } from \"../rope\";\r\nimport { createHook } from \"./abilities/hook\";\r\nimport { createFootstepEmitter } from \"./particles\";\r\n\r\nconst IMPULSE_FORCE = 500;\r\nconst JUMP_FORCE = -600;\r\nconst SPEED = 200;\r\nconst DRAG_ON_GROUND = 7;\r\n\r\nexport const spawnPlayer = (position) => {\r\n  loadSprite(\"hero\", \"./sprites/all.png\", {\r\n    sliceX: 8,\r\n    sliceY: 2,\r\n    anims: {\r\n      afk: 0,\r\n      idle: { from: 0, to: 7, loop: true },\r\n      walk: { from: 8, to: 14, loop: true },\r\n    },\r\n  });\r\n\r\n  const player = add([\r\n    sprite(\"hero\"),\r\n    pos(position),\r\n    area(),\r\n    body(),\r\n    anchor(\"center\"),\r\n    color(0, 0, 0),\r\n    \"player\",\r\n  ]);\r\n\r\n  // Player variables\r\n  player.lastDirection = 1;\r\n  let isAttached = false;\r\n  let attachedPos = null;\r\n\r\n  // Player movement\r\n  onKeyDown(\"left\", () => {\r\n    player.flipX = true;\r\n    player.move(-SPEED, 0);\r\n    player.lastDirection = -1;\r\n  });\r\n\r\n  onKeyDown(\"right\", () => {\r\n    player.flipX = false;\r\n    player.move(SPEED, 0);\r\n    player.lastDirection = 1;\r\n  });\r\n\r\n  onKeyPress(\"up\", () => {\r\n    if (player.isGrounded() || isAttached) {\r\n      disattachWall();\r\n      player.applyImpulse(vec2(0, JUMP_FORCE));\r\n    }\r\n  });\r\n\r\n  onKeyPress(\"x\", () => {\r\n    dash();\r\n  });\r\n\r\n  // Physics\r\n  player.onUpdate(() => {\r\n    if (hook.isHooded) {\r\n      console.log(\"hello\");\r\n    }\r\n\r\n    if (player.isGrounded()) {\r\n      player.drag = DRAG_ON_GROUND;\r\n    } else {\r\n      player.drag = 0;\r\n    }\r\n\r\n    if (isAttached && attachedPos) {\r\n      player.pos = attachedPos.clone();\r\n      player.vel = vec2(0, 0);\r\n    }\r\n\r\n    if (player.isGrounded()) {\r\n      if (isKeyDown(\"left\") || isKeyDown(\"right\")) {\r\n        if (player.curAnim() == \"walk\") return;\r\n\r\n        player.play(\"walk\");\r\n      } else {\r\n        if (player.curAnim() == \"idle\") return;\r\n\r\n        player.play(\"idle\");\r\n      }\r\n    } else {\r\n      player.play(\"afk\");\r\n    }\r\n  });\r\n\r\n  player.onCollide(\"solid\", (collision) => {\r\n    if (!isAttached && Math.abs(player.vel.x) > 2 && !player.isGrounded()) {\r\n      isAttached = true;\r\n      attachedPos = player.pos;\r\n\r\n      player.vel = vec2(0, 0);\r\n\r\n      player.gravity = 0;\r\n\r\n      shake(5);\r\n    }\r\n  });\r\n\r\n  onKeyPress(\"down\", () => {\r\n    disattachWall();\r\n  });\r\n\r\n  function disattachWall() {\r\n    if (isAttached) {\r\n      isAttached = false;\r\n      attachedPos = null;\r\n      player.gravity = 1;\r\n\r\n      shake(1);\r\n      player.vel = vec2(player.vel.x, -5);\r\n    }\r\n  }\r\n\r\n  const hook = createHook(player);\r\n  console.log(hook);\r\n\r\n  loadSprite(\"dust\", \"./sprites/dust.png\").then(() => {\r\n    const footsteps = createFootstepEmitter(player);\r\n  });\r\n\r\n  function dash() {\r\n    player.applyImpulse(vec2(IMPULSE_FORCE * player.lastDirection, 0));\r\n  }\r\n\r\n  return player;\r\n};\r\n","import { spawnPlayer } from \"../objects/player/player\";\r\n\r\nexport const test_scene = () => {\r\n  let player = spawnPlayer(vec2(width() / 6 + 50, height() - 200));\r\n\r\n  add([\r\n    rect(width() / 3, 20),\r\n    pos(0, height() - 20),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  add([\r\n    rect(width() / 3, 20),\r\n    pos((width() / 3) * 2, height() - 20),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  add([\r\n    rect(width() / 3, 20),\r\n    pos(width() / 6, height() - 200),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  add([\r\n    rect(20, height() - 20),\r\n    pos(width() - 20, 0),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  add([\r\n    rect(20, height() - 20),\r\n    pos(0, 0),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  add([\r\n    rect(20, height() - 20),\r\n    pos(width() / 2, height() * -0.355),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  add([\r\n    rect(20, height() - 20),\r\n    pos(width() * 0.66, height() * 0.75),\r\n    area(),\r\n    body({ isStatic: true }),\r\n    color(0, 0, 0),\r\n    \"solid\",\r\n  ]);\r\n\r\n  setGravity(1600);\r\n};\r\n","import kaplay from \"kaplay\";\nimport { fullscreenHandler } from \"./utils/fullscreen\";\nimport { GAME_WIDTH, GAME_HEIGHT } from \"./config.js\";\n\nimport App from \"./app.js\";\nimport { test_scene } from \"./scenes/testing_scene.js\";\n\nconst k = kaplay({\n  background: [255, 255, 255],\n  width: GAME_WIDTH,\n  height: GAME_HEIGHT,\n  scale: 1,\n  pixelated: true,\n});\n\nfullscreenHandler(k);\n\nApp.init(k);\n\nApp.addScene(\"test\", test_scene);\nApp.startScene(\"test\");\n"],"names":["resizeGame","kaplay","gameCanvas","winWidth","winHeight","scaleX","scaleY","scale","goFullscreen","canvas","fullscreenHandler","GAME_WIDTH","GAME_HEIGHT","App","kaplayInstance","name","sceneFunc","createSwingRope","anchor","radius","angle","angularVelocity","gravity","damping","player","attach","entity","dx","dy","applyImpulse","force","update","dt","frameFactor","dist","nx","ny","radialVel","drawRope","dir","endPos","setAnchor","newAnchor","setRadius","newRadius","HOOK_IMPULSE","HOOK_LEN","createHook","rope","updateRope","releaseHook","removeHook","hit","getNewHookPoint","hook_len","newDir","direction","createFootstepEmitter","dustSprite","dustTexture","dustFrame","IMPULSE_FORCE","JUMP_FORCE","SPEED","DRAG_ON_GROUND","spawnPlayer","position","isAttached","attachedPos","disattachWall","dash","hook","collision","test_scene","k"],"mappings":"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"}