{"version":3,"file":"index-Cbnv9xUA.js","sources":["../../src/utils/fullscreen.js","../../src/config.js","../../src/app.js","../../src/objects/enemies/turretAR.js","../../src/objects/mouse.js","../../src/objects/player/abilities/dash.js","../../src/objects/player/player.js","../../src/scenes/testing_scene.js","../../src/scenes/death.scene.js","../../src/utils/shaders.js","../../src/main.js","../../src/utils/background.js"],"sourcesContent":["function resizeGame(kaplay) {\r\n  const gameCanvas = document.querySelector(\"canvas\");\r\n\r\n  const winWidth = window.innerWidth;\r\n  const winHeight = window.innerHeight;\r\n\r\n  const scaleX = Math.floor(winWidth / kaplay.width);\r\n  const scaleY = Math.floor(winHeight / kaplay.height);\r\n  const scale = Math.max(1, Math.min(scaleX, scaleY));\r\n\r\n  gameCanvas.style.width = kaplay.width * scale + \"px\";\r\n  gameCanvas.style.height = kaplay.height * scale + \"px\";\r\n  gameCanvas.style.imageRendering = \"pixelated\";\r\n  gameCanvas.style.position = \"absolute\";\r\n  gameCanvas.style.top = \"50%\";\r\n  gameCanvas.style.left = \"50%\";\r\n  gameCanvas.style.transform = \"translate(-50%, -50%)\";\r\n}\r\n\r\nfunction goFullscreen() {\r\n  const canvas = document.querySelector(\"canvas\");\r\n  if (canvas.requestFullscreen) {\r\n    canvas.requestFullscreen();\r\n  } else if (canvas.webkitRequestFullscreen) {\r\n    canvas.webkitRequestFullscreen();\r\n  }\r\n}\r\n\r\nexport function fullscreenHandler(kaplay) {\r\n  window.addEventListener(\"resize\", resizeGame(kaplay));\r\n  window.addEventListener(\"load\", resizeGame(kaplay));\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"f\") {\r\n      goFullscreen();\r\n    }\r\n  });\r\n}\r\n","export const GAME_WIDTH = 800;\r\nexport const GAME_HEIGHT = 800;\r\n\r\n// 16:9\r\n\r\n// export const COLORS = {\r\n//   background: [56, 43, 38],\r\n//   foreground: [184, 194, 185],\r\n// };\r\n\r\nexport const DEF_COLORS = {\r\n  background: [34, 42, 61],\r\n  foreground: [237, 242, 226],\r\n};\r\n\r\nexport const COLORS = {\r\n  background: [34, 42, 61],\r\n  foreground: [237, 242, 226],\r\n};\r\n\r\nexport function setForegroundColor(newColor) {\r\n  COLORS.foreground = newColor;\r\n  const allObj = get(\"*\");\r\n\r\n  allObj.map((obj) => {\r\n    if (obj.color) obj.color = Color.fromArray(newColor);\r\n    if (obj.outline) obj.outline.color = Color.fromArray(newColor);\r\n  });\r\n}\r\n","const App = {\r\n  kaplayInstance: null,\r\n  currentScene: null,\r\n\r\n  init(kaplayInstance) {\r\n    this.kaplayInstance = kaplayInstance;\r\n  },\r\n\r\n  addScene(name, sceneFunc) {\r\n    if (!this.kaplayInstance) {\r\n      console.error(\"Kaplay instance не инициализирован\");\r\n      return;\r\n    }\r\n\r\n    this.kaplayInstance.scene(name, sceneFunc);\r\n  },\r\n\r\n  startScene(name) {\r\n    if (!this.kaplayInstance) {\r\n      console.error(\"Kaplay instance не инициализирован\");\r\n      return;\r\n    }\r\n\r\n    this.currentScene = name;\r\n    this.kaplayInstance.go(name);\r\n  },\r\n};\r\n\r\nexport default App;\r\n","import { COLORS } from \"../../config\";\r\n\r\nexport function spawnTurretAR(position, options = {}) {\r\n  const {\r\n    bulletCount = 12,\r\n    bulletSpeed = 150,\r\n    damage = 1,\r\n    shootInterval = 2,\r\n    bulletColor = [COLORS.foreground],\r\n    size = 24,\r\n  } = options;\r\n\r\n  const turret = add([\r\n    rect(size, size),\r\n    pos(position),\r\n    color(COLORS.foreground),\r\n    anchor(\"center\"),\r\n    \"enemy\",\r\n    {\r\n      bulletCount,\r\n      bulletSpeed,\r\n      damage,\r\n      shootInterval,\r\n    },\r\n  ]);\r\n\r\n  function shootCircle() {\r\n    for (let i = 0; i < turret.bulletCount; i++) {\r\n      const angle = (i / turret.bulletCount) * Math.PI * 2;\r\n      const dir = vec2(Math.cos(angle), Math.sin(angle));\r\n\r\n      add([\r\n        circle(6),\r\n        pos(turret.pos),\r\n        color(COLORS.foreground),\r\n        area(),\r\n        \"bullet\",\r\n        { dir, speed: turret.bulletSpeed, damage: turret.damage },\r\n      ]);\r\n    }\r\n  }\r\n\r\n  loop(turret.shootInterval, () => {\r\n    shootCircle();\r\n  });\r\n\r\n  return turret;\r\n}\r\n\r\nexport function setupBulletLogic(destroyBulletFunc) {\r\n  onUpdate(\"bullet\", (b) => {\r\n    b.move(b.dir.scale(b.speed));\r\n\r\n    destroyBulletFunc(b);\r\n  });\r\n\r\n  onCollide(\"bullet\", \"player\", (bullet, player) => {\r\n    shake(4);\r\n\r\n    destroy(bullet);\r\n    player.hurt(bullet.damage);\r\n  });\r\n}\r\n","import { COLORS } from \"../config\";\r\n\r\nconst Cursor = {\r\n  c: null,\r\n\r\n  async init() {\r\n    await loadSprite(\"crosshair\", \"./sprites/crosshair.png\");\r\n\r\n    this.c = add([\r\n      sprite(\"crosshair\"),\r\n      pos(center()),\r\n      color(COLORS.foreground),\r\n      anchor(\"center\"),\r\n      \"cursor\",\r\n    ]);\r\n\r\n    this.c.use(\r\n      shader(\"newTint\", () => ({\r\n        r: COLORS.foreground.at(0) / 255,\r\n        g: COLORS.foreground.at(1) / 255,\r\n        b: COLORS.foreground.at(2) / 255,\r\n      }))\r\n    );\r\n\r\n    setCursor(\"none\");\r\n\r\n    const self = this;\r\n    onUpdate(\"cursor\", (cursorObj) => {\r\n      cursorObj.pos = mousePos();\r\n    });\r\n  },\r\n\r\n  getCursorPos() {\r\n    return this.c ? vec2(this.c.pos) : null;\r\n  },\r\n};\r\n\r\nexport default Cursor;\r\n","import Cursor from \"../../mouse\";\r\n\r\nconst IMPULSE_FORCE = 700;\r\nconst DASH_COOLDOWN = 1.5;\r\n\r\nexport function initDashAbility(player) {\r\n  const dashAbility = add([timer()]);\r\n  let hasDashed = false;\r\n\r\n  dashAbility.useDash = () => {\r\n    if (hasDashed == true) return;\r\n\r\n    hasDashed = true;\r\n    dashAbility.wait(DASH_COOLDOWN, () => {\r\n      hasDashed = false;\r\n    });\r\n\r\n    const playerPos = player.pos;\r\n    const mousePos = Cursor.getCursorPos();\r\n    const dir = mousePos.sub(playerPos).unit();\r\n\r\n    player.applyImpulse(vec2(IMPULSE_FORCE * dir.x, IMPULSE_FORCE * dir.y));\r\n  };\r\n\r\n  onMousePress(\"left\", () => {\r\n    dashAbility.useDash(player);\r\n  });\r\n\r\n  return dashAbility;\r\n}\r\n","import App from \"../../app\";\r\nimport { COLORS, DEF_COLORS, setForegroundColor } from \"../../config\";\r\nimport { initAttachAbility } from \"./abilities/attach\";\r\nimport { initDashAbility } from \"./abilities/dash\";\r\nimport { initHookAbility } from \"./abilities/hook\";\r\nimport { createFootstepEmitter } from \"./particles\";\r\n\r\nconst MAX_HEALTH = 5;\r\nconst SPEED = 250;\r\nconst DRAG = 7;\r\nconst INV_AFTER_HURT = 0.3;\r\n\r\nexport const spawnPlayer = async (position) => {\r\n  let frames = vec2(12, 2);\r\n  let canTakeDamage = true;\r\n\r\n  loadSprite(\"hero\", \"./sprites/all.png\", {\r\n    sliceX: frames.x,\r\n    sliceY: frames.y,\r\n    anims: {\r\n      afk: 0,\r\n      idle: { from: 0, to: 7, loop: true },\r\n      walk: { from: 12, to: 23, loop: true },\r\n    },\r\n  });\r\n\r\n  const playerSprite = await getSprite(\"hero\");\r\n\r\n  const player = add([\r\n    sprite(playerSprite),\r\n    health(MAX_HEALTH, MAX_HEALTH),\r\n    pos(position),\r\n    color(COLORS.foreground),\r\n    area({\r\n      shape: new Polygon([\r\n        vec2(-18, 12),\r\n        vec2(10, 12),\r\n        vec2(10, -20),\r\n        vec2(-18, -20),\r\n      ]),\r\n    }),\r\n    body(),\r\n    anchor(vec2(0.2, 0.5)),\r\n    timer(),\r\n    \"player\",\r\n  ]);\r\n\r\n  player.use(\r\n    shader(\"playerShader\", () => ({\r\n      r: player.color.r / 255,\r\n      g: player.color.g / 255,\r\n      b: player.color.b / 255,\r\n      h: 596 + (1 - player.hp() / player.maxHP()) * 1452,\r\n      texSize: vec2(playerSprite.tex.width, playerSprite.tex.height),\r\n      frameOffset: vec2(\r\n        playerSprite.frames[player.frame].x,\r\n        playerSprite.frames[player.frame].y\r\n      ),\r\n      frameSize: vec2(\r\n        playerSprite.frames[player.frame].w,\r\n        playerSprite.frames[player.frame].h\r\n      ),\r\n    }))\r\n  );\r\n\r\n  onKeyPress(\"space\", () => {\r\n    player.hurt(1);\r\n    console.log(player.maxHP(), player.hp() / player.maxHP());\r\n  });\r\n\r\n  // Player variables\r\n  player.drag = DRAG;\r\n  player.canMove = true;\r\n  player.isMoving = false;\r\n  player.lastDirection = vec2(1, 1);\r\n\r\n  // Player movement\r\n  const keyMap = {\r\n    KeyW: \"up\",\r\n    KeyA: \"left\",\r\n    KeyS: \"down\",\r\n    KeyD: \"right\",\r\n  };\r\n\r\n  const pressed = {};\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    const action = keyMap[e.code];\r\n    if (action) pressed[action] = true;\r\n  });\r\n\r\n  document.addEventListener(\"keyup\", (e) => {\r\n    const action = keyMap[e.code];\r\n    if (action) pressed[action] = false;\r\n  });\r\n\r\n  function isActionDown(action) {\r\n    return !!pressed[action];\r\n  }\r\n\r\n  const moveHandler = () => {\r\n    if (!player.canMove) return;\r\n\r\n    let dirX = 0;\r\n    let dirY = 0;\r\n\r\n    if (isActionDown(\"left\")) dirX -= 1;\r\n    if (isActionDown(\"right\")) dirX += 1;\r\n    if (isActionDown(\"up\")) dirY -= 1;\r\n    if (isActionDown(\"down\")) dirY += 1;\r\n\r\n    let dir = vec2(dirX, dirY);\r\n    if (dir.len() > 0) {\r\n      dir = dir.unit();\r\n      player.lastDirection = dir;\r\n      player.move(dir.x * SPEED, dir.y * SPEED);\r\n      player.flipX = dir.x < 0;\r\n    }\r\n  };\r\n\r\n  // Abilities\r\n  const dashAbility = initDashAbility(player);\r\n  // const attachAbility = initAttachAbility(player, JUMP_FORCE);\r\n  // const hookAbility = initHookAbility(player);\r\n\r\n  // Physics\r\n  player.onUpdate(() => {\r\n    moveHandler();\r\n\r\n    if (\r\n      (isActionDown(\"left\") ||\r\n        isActionDown(\"right\") ||\r\n        isActionDown(\"up\") ||\r\n        isActionDown(\"down\")) &&\r\n      player.canMove\r\n    ) {\r\n      player.isMoving = true;\r\n      if (player.curAnim() == \"walk\") return;\r\n\r\n      player.play(\"walk\");\r\n    } else {\r\n      player.isMoving = false;\r\n      if (player.curAnim() == \"idle\") return;\r\n\r\n      player.play(\"afk\");\r\n    }\r\n  });\r\n\r\n  // Damage\r\n  player.hurt = (amount) => {\r\n    if (!canTakeDamage) return;\r\n\r\n    canTakeDamage = false;\r\n    player.wait(INV_AFTER_HURT, () => {\r\n      canTakeDamage = true;\r\n    });\r\n\r\n    player.setHP(player.hp() - amount);\r\n    player.trigger(\"hurt\");\r\n  };\r\n\r\n  player.onHurt((damage) => {\r\n    if (player.hp() <= 0) return;\r\n\r\n    setForegroundColor([255, 0, 0]);\r\n\r\n    player.wait(0.3, () => {\r\n      setForegroundColor(DEF_COLORS.foreground);\r\n    });\r\n  });\r\n\r\n  // Death\r\n  player.onDeath(() => {\r\n    App.startScene(\"death\");\r\n  });\r\n\r\n  return player;\r\n};\r\n","import { COLORS } from \"../config\";\r\nimport { setupBulletLogic, spawnTurretAR } from \"../objects/enemies/turretAR\";\r\nimport Cursor from \"../objects/mouse\";\r\nimport { spawnPlayer } from \"../objects/player/player\";\r\n\r\nexport const test_scene = async () => {\r\n  const PLAYER_START_POS = vec2(center().x, center().y * 1.7);\r\n\r\n  const player = await spawnPlayer(PLAYER_START_POS);\r\n  await Cursor.init();\r\n\r\n  const centerPos = vec2(width() / 2, height() / 2);\r\n  const radius = width() / 2 - 16;\r\n  const halfRadiusPlayerModel = 36;\r\n\r\n  add([\r\n    pos(centerPos),\r\n    circle(radius, { fill: false }),\r\n    outline(2, Color.fromArray(COLORS.foreground)),\r\n    \"border\",\r\n  ]);\r\n\r\n  player.onUpdate(() => {\r\n    const distFromCenter = player.pos.dist(centerPos);\r\n    if (distFromCenter > radius - halfRadiusPlayerModel) {\r\n      const dir = player.pos.sub(centerPos).unit();\r\n      player.pos = centerPos.add(dir.scale(radius - halfRadiusPlayerModel));\r\n    }\r\n  });\r\n\r\n  // const scoreText = add([\r\n  //   text(\"x -> dash\", { font: \"Tiny\" }),\r\n  //   pos(20, 20),\r\n  //   layer(\"ui\"),\r\n  //   color(COLORS.foreground),\r\n  // ]);\r\n\r\n  setupBulletLogic((bullet) => {\r\n    const distFromCenter = bullet.pos.dist(centerPos);\r\n    if (distFromCenter > radius - bullet.radius / 2) {\r\n      destroy(bullet);\r\n    }\r\n  });\r\n\r\n  // спавним туррель\r\n  spawnTurretAR(vec2(center().x, 150));\r\n  spawnTurretAR(vec2(center().x, 200), { bulletCount: 24, bulletSpeed: 200 });\r\n};\r\n","import App from \"../app\";\r\nimport { COLORS } from \"../config\";\r\n\r\nexport const death_scene = async (nextScene) => {\r\n  const centerPos = vec2(width() / 2, height() / 2);\r\n  const radius = width() / 2 - 16;\r\n\r\n  add([\r\n    pos(centerPos),\r\n    circle(radius, { fill: false }),\r\n    outline(2, Color.fromArray(COLORS.foreground)),\r\n  ]);\r\n\r\n  const scoreText = add([\r\n    text(\"You are dead!\\nPress space to restart\", {\r\n      font: \"Tiny\",\r\n      align: \"center\",\r\n    }),\r\n    color(COLORS.foreground),\r\n    pos(center()),\r\n    anchor(\"center\"),\r\n    layer(\"ui\"),\r\n    animate(),\r\n  ]);\r\n\r\n  onKeyPress(\"space\", () => {\r\n    App.startScene(\"test\");\r\n  });\r\n\r\n  scoreText.animate(\"scale\", [0, 1], {\r\n    duration: 0.5,\r\n    loops: 1,\r\n  });\r\n\r\n  return nextScene;\r\n};\r\n","export function initShaders() {\r\n  loadShader(\r\n    \"playerShader\",\r\n    null,\r\n    `\r\n  precision mediump float;\r\n\r\n  uniform float r;\r\n  uniform float g;\r\n  uniform float b;\r\n  uniform float h;\r\n  uniform vec2 texSize;\r\n  uniform vec2 frameOffset;\r\n  uniform vec2 frameSize;\r\n\r\n  vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {\r\n      vec4 c = texture2D(tex, uv);\r\n\r\n      if (c.a < 0.01) {\r\n          return c;\r\n      }\r\n\r\n      vec2 offsetX = vec2(1.0 / texSize.x, 0.0);\r\n      vec2 offsetY = vec2(0.0, 1.0 / texSize.y);\r\n\r\n      float alphaUp    = texture2D(tex, uv + offsetY).a;\r\n      float alphaDown  = texture2D(tex, uv - offsetY).a;\r\n      float alphaLeft  = texture2D(tex, uv - offsetX).a;\r\n      float alphaRight = texture2D(tex, uv + offsetX).a;\r\n\r\n      if (alphaUp < 0.01 || alphaDown < 0.01 || alphaLeft < 0.01 || alphaRight < 0.01) {\r\n          return vec4(r, g, b, c.a);\r\n      }\r\n\r\n      vec2 pixelCoord = uv * texSize;\r\n      vec2 localPixel = pixelCoord - (frameOffset * texSize);\r\n      vec2 localUV = localPixel / frameSize; // 0..1 по фрейму\r\n\r\n      if (localUV.y <= h) {\r\n          return vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n\r\n      return vec4(r, g, b, c.a);\r\n      }\r\n      `\r\n  );\r\n\r\n  loadShader(\r\n    \"newTint\",\r\n    null,\r\n    `\r\n    precision mediump float;\r\n\r\n    uniform float r;\r\n    uniform float g;\r\n    uniform float b;\r\n\r\n    vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {\r\n      vec4 c = def_frag();\r\n\r\n      return vec4(r, g, b, c.a);\r\n    }\r\n    `\r\n  );\r\n}\r\n","import kaplay from \"kaplay\";\r\nimport { fullscreenHandler } from \"./utils/fullscreen\";\r\nimport { GAME_WIDTH, GAME_HEIGHT, COLORS } from \"./config.js\";\r\n\r\nimport App from \"./app.js\";\r\nimport { test_scene } from \"./scenes/testing_scene.js\";\r\nimport { death_scene } from \"./scenes/death.scene.js\";\r\nimport { initShaders } from \"./utils/shaders.js\";\r\n\r\nconst k = kaplay({\r\n  background: [COLORS.background],\r\n  width: GAME_WIDTH,\r\n  height: GAME_HEIGHT,\r\n  scale: 1,\r\n  pixelated: true,\r\n});\r\n\r\nfullscreenHandler(k);\r\n\r\nloadFont(\"Tiny\", \"./fonts/Tiny5-Regular.ttf\");\r\ninitShaders();\r\n\r\nApp.init(k);\r\n\r\nApp.addScene(\"test\", test_scene);\r\nApp.addScene(\"death\", death_scene);\r\nApp.startScene(\"test\");\r\n","import { COLORS } from \"../config\";\r\n\r\nconst body = document.querySelector(\"body\");\r\n\r\nbody.style.backgroundColor = rgb(COLORS.background);\r\n"],"names":["resizeGame","kaplay","gameCanvas","winWidth","winHeight","scaleX","scaleY","scale","goFullscreen","canvas","fullscreenHandler","e","GAME_WIDTH","GAME_HEIGHT","DEF_COLORS","COLORS","setForegroundColor","newColor","obj","App","kaplayInstance","name","sceneFunc","spawnTurretAR","position","options","bulletCount","bulletSpeed","damage","shootInterval","bulletColor","size","turret","shootCircle","i","angle","dir","setupBulletLogic","destroyBulletFunc","b","bullet","player","Cursor","cursorObj","IMPULSE_FORCE","DASH_COOLDOWN","initDashAbility","dashAbility","hasDashed","playerPos","MAX_HEALTH","SPEED","DRAG","INV_AFTER_HURT","spawnPlayer","frames","canTakeDamage","playerSprite","keyMap","pressed","action","isActionDown","moveHandler","dirX","dirY","amount","test_scene","PLAYER_START_POS","centerPos","radius","halfRadiusPlayerModel","death_scene","nextScene","scoreText","initShaders","k","body"],"mappings":"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"}